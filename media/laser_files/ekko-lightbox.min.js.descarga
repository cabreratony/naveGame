/*
 * Lightbox for Bootstrap by @ashleydw
 * https://github.com/ashleydw/lightbox
 *
 * License: https://github.com/ashleydw/lightbox/blob/master/LICENSE
 */
+function(b){var a=(function(){function e(j,g){for(var f=0;f<g.length;f++){var h=g[f];h.enumerable=h.enumerable||false;h.configurable=true;if("value" in h){h.writable=true}Object.defineProperty(j,h.key,h)}}return function(h,f,g){if(f){e(h.prototype,f)}if(g){e(h,g)}return h}})();function c(e,f){if(!(e instanceof f)){throw new TypeError("Cannot call a class as a function")}}var d=(function(k){var p="ekkoLightbox";var e=k.fn[p];var m={title:"",footer:"",showArrows:true,type:null,alwaysShowClose:false,loadingMessage:'<div class="ekko-lightbox-loader"><div><div></div><div></div></div></div>',leftArrow:"<span>&#10094;</span>",rightArrow:"<span>&#10095;</span>",strings:{close:"Close",fail:"Failed to load image:",type:"Could not detect remote target type. Force the type using data-type"},doc:document,onShow:function o(){},onShown:function n(){},onHide:function h(){},onHidden:function i(){},onNavigate:function j(){},onContentLoaded:function g(){}};var f=(function(){a(t,null,[{key:"Default",get:function T(){return m}}]);function t(af,Y){var ab=this;c(this,t);this._config=k.extend({},m,Y);this._$modalArrows=null;this._galleryIndex=0;this._galleryName=null;this._padding=null;this._border=null;this._titleIsShown=false;this._footerIsShown=false;this._wantedWidth=0;this._wantedHeight=0;this._modalId="ekkoLightbox-"+Math.floor(Math.random()*1000+1);this._$element=af instanceof jQuery?af:k(af);this._isBootstrap3=k.fn.modal.Constructor.VERSION[0]==3;var ac='<h4 class="modal-title">'+(this._config.title||"&nbsp;")+"</h4>";var X='<button type="button" class="close" data-dismiss="modal" aria-label="'+this._config.strings.close+'"><span aria-hidden="true">&times;</span></button>';var Z='<div class="modal-header"'+(this._config.title||this._config.alwaysShowClose?"":' style="display:none"')+">"+(this._isBootstrap3?X+ac:ac+X)+"</div>";var ae='<div class="modal-footer"'+(this._config.footer?"":' style="display:none"')+">"+(this._config.footer||"&nbsp;")+"</div>";var aa='<div class="modal-body"><div class="ekko-lightbox-container"><div class="ekko-lightbox-item fade in show"></div><div class="ekko-lightbox-item fade"></div></div></div>';var ad='<div class="modal-dialog" role="document" style="margin-top:200px;"><div class="modal-content">'+Z+aa+ae+"</div></div>";k(this._config.doc.body).append('<div id="'+this._modalId+'" class="ekko-lightbox modal fade" tabindex="-1" tabindex="-1" role="dialog" aria-hidden="true">'+ad+"</div>");this._$modal=k("#"+this._modalId,this._config.doc);this._$modalDialog=this._$modal.find(".modal-dialog").first();this._$modalContent=this._$modal.find(".modal-content").first();this._$modalBody=this._$modal.find(".modal-body").first();this._$modalHeader=this._$modal.find(".modal-header").first();this._$modalFooter=this._$modal.find(".modal-footer").first();this._$lightboxContainer=this._$modalBody.find(".ekko-lightbox-container").first();this._$lightboxBodyOne=this._$lightboxContainer.find("> div:first-child").first();this._$lightboxBodyTwo=this._$lightboxContainer.find("> div:last-child").first();this._border=this._calculateBorders();this._padding=this._calculatePadding();this._galleryName=this._$element.data("gallery");if(this._galleryName){this._$galleryItems=k(document.body).find('*[data-gallery="'+this._galleryName+'"]');this._galleryIndex=this._$galleryItems.index(this._$element);k(document).on("keydown.ekkoLightbox",this._navigationalBinder.bind(this));if(this._config.showArrows&&this._$galleryItems.length>1){this._$lightboxContainer.append('<div class="ekko-lightbox-nav-overlay"><a href="#">'+this._config.leftArrow+'</a><a href="#">'+this._config.rightArrow+"</a></div>");this._$modalArrows=this._$lightboxContainer.find("div.ekko-lightbox-nav-overlay").first();this._$lightboxContainer.on("click","a:first-child",function(ag){ag.preventDefault();return ab.navigateLeft()});this._$lightboxContainer.on("click","a:last-child",function(ag){ag.preventDefault();return ab.navigateRight()})}}this._$modal.on("show.bs.modal",this._config.onShow.bind(this)).on("shown.bs.modal",function(){ab._toggleLoading(true);ab._handle();return ab._config.onShown.call(ab)}).on("hide.bs.modal",this._config.onHide.bind(this)).on("hidden.bs.modal",function(){if(ab._galleryName){k(document).off("keydown.ekkoLightbox");k(window).off("resize.ekkoLightbox")}ab._$modal.remove();return ab._config.onHidden.call(ab)}).modal(this._config);k(window).on("resize.ekkoLightbox",function(){ab._resize(ab._wantedWidth,ab._wantedHeight)})}a(t,[{key:"element",value:function r(){return this._$element}},{key:"modal",value:function Q(){return this._$modal}},{key:"navigateTo",value:function J(X){if(X<0||X>this._$galleryItems.length-1){return this}this._galleryIndex=X;this._$element=k(this._$galleryItems.get(this._galleryIndex));this._handle()}},{key:"navigateLeft",value:function H(){if(this._$galleryItems.length===1){return}if(this._galleryIndex===0){this._galleryIndex=this._$galleryItems.length-1}else{this._galleryIndex--}this._config.onNavigate.call(this,"left",this._galleryIndex);return this.navigateTo(this._galleryIndex)}},{key:"navigateRight",value:function u(){if(this._$galleryItems.length===1){return}if(this._galleryIndex===this._$galleryItems.length-1){this._galleryIndex=0}else{this._galleryIndex++}this._config.onNavigate.call(this,"right",this._galleryIndex);return this.navigateTo(this._galleryIndex)}},{key:"close",value:function G(){return this._$modal.modal("hide")}},{key:"_navigationalBinder",value:function q(X){X=X||window.event;if(X.keyCode===39){return this.navigateRight()}if(X.keyCode===37){return this.navigateLeft()}}},{key:"_detectRemoteType",value:function K(Y,X){X=X||false;if(!X&&this._isImage(Y)){X="image"}if(!X&&this._getYoutubeId(Y)){X="youtube"}if(!X&&this._getVimeoId(Y)){X="vimeo"}if(!X&&this._getInstagramId(Y)){X="instagram"}if(!X||["image","youtube","vimeo","instagram","video","url"].indexOf(X)<0){X="url"}return X}},{key:"_isImage",value:function I(X){return X&&X.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)}},{key:"_containerToUse",value:function E(){var Z=this;var Y=this._$lightboxBodyTwo;var X=this._$lightboxBodyOne;if(this._$lightboxBodyTwo.hasClass("in")){Y=this._$lightboxBodyOne;X=this._$lightboxBodyTwo}X.removeClass("in show");setTimeout(function(){if(!Z._$lightboxBodyTwo.hasClass("in")){Z._$lightboxBodyTwo.empty()}if(!Z._$lightboxBodyOne.hasClass("in")){Z._$lightboxBodyOne.empty()}},500);Y.addClass("in show");return Y}},{key:"_handle",value:function v(){var Y=this._containerToUse();this._updateTitleAndFooter();var Z=this._$element.attr("data-remote")||this._$element.attr("href");var X=this._detectRemoteType(Z,this._$element.attr("data-type")||false);if(["image","youtube","vimeo","instagram","video","url"].indexOf(X)<0){return this._error(this._config.strings.type)}switch(X){case"image":this._preloadImage(Z,Y);this._preloadImageByIndex(this._galleryIndex,3);break;case"youtube":this._showYoutubeVideo(Z,Y);break;case"vimeo":this._showVimeoVideo(this._getVimeoId(Z),Y);break;case"instagram":this._showInstagramVideo(this._getInstagramId(Z),Y);break;case"video":this._showHtml5Video(Z,Y);break;default:this._loadRemoteContent(Z,Y);break}return this}},{key:"_getYoutubeId",value:function O(X){if(!X){return false}var Y=X.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);return Y&&Y[2].length===11?Y[2]:false}},{key:"_getVimeoId",value:function L(X){return X&&X.indexOf("vimeo")>0?X:false}},{key:"_getInstagramId",value:function N(X){return X&&X.indexOf("instagram")>0?X:false}},{key:"_toggleLoading",value:function D(X){X=X||false;if(X){this._$modalDialog.css("display","none");this._$modal.removeClass("in show");k(".modal-backdrop").append(this._config.loadingMessage)}else{this._$modalDialog.css("display","block");this._$modal.addClass("in show");k(".modal-backdrop").find(".ekko-lightbox-loader").remove()}return this}},{key:"_calculateBorders",value:function s(){return{top:this._totalCssByAttribute("border-top-width"),right:this._totalCssByAttribute("border-right-width"),bottom:this._totalCssByAttribute("border-bottom-width"),left:this._totalCssByAttribute("border-left-width")}}},{key:"_calculatePadding",value:function F(){return{top:this._totalCssByAttribute("padding-top"),right:this._totalCssByAttribute("padding-right"),bottom:this._totalCssByAttribute("padding-bottom"),left:this._totalCssByAttribute("padding-left")}}},{key:"_totalCssByAttribute",value:function W(X){return parseInt(this._$modalDialog.css(X),10)+parseInt(this._$modalContent.css(X),10)+parseInt(this._$modalBody.css(X),10)}},{key:"_updateTitleAndFooter",value:function M(){var Y=this._$element.data("title")||"";var X=this._$element.data("footer")||"";this._titleIsShown=false;if(Y||this._config.alwaysShowClose){this._titleIsShown=true;this._$modalHeader.css("display","").find(".modal-title").html(Y||"&nbsp;")}else{this._$modalHeader.css("display","none")}this._footerIsShown=false;if(X){this._footerIsShown=true;this._$modalFooter.css("display","").html(X)}else{this._$modalFooter.css("display","none")}return this}},{key:"_showYoutubeVideo",value:function S(ab,Y){var ac=this._getYoutubeId(ab);var aa=ab.indexOf("&")>0?ab.substr(ab.indexOf("&")):"";var Z=this._$element.data("width")||560;var X=this._$element.data("height")||Z/(560/315);return this._showVideoIframe("//www.youtube.com/embed/"+ac+"?badge=0&autoplay=1&html5=1"+aa,Z,X,Y)}},{key:"_showVimeoVideo",value:function y(aa,Y){var Z=500;var X=this._$element.data("height")||Z/(560/315);return this._showVideoIframe(aa+"?autoplay=1",Z,X,Y)}},{key:"_showInstagramVideo",value:function z(aa,Y){var Z=this._$element.data("width")||612;var X=Z+80;aa=aa.substr(-1)!=="/"?aa+"/":aa;Y.html('<iframe width="'+Z+'" height="'+X+'" src="'+aa+'embed/" frameborder="0" allowfullscreen></iframe>');this._resize(Z,X);this._config.onContentLoaded.call(this);if(this._$modalArrows){this._$modalArrows.css("display","none")}this._toggleLoading(false);return this}},{key:"_showVideoIframe",value:function R(Y,aa,X,Z){X=X||aa;Z.html('<div class="embed-responsive embed-responsive-16by9"><iframe width="'+aa+'" height="'+X+'" src="'+Y+'" frameborder="0" allowfullscreen class="embed-responsive-item"></iframe></div>');this._resize(aa,X);this._config.onContentLoaded.call(this);if(this._$modalArrows){this._$modalArrows.css("display","none")}this._toggleLoading(false);return this}},{key:"_showHtml5Video",value:function V(Y,Z){var aa=this._$element.data("width")||560;var X=this._$element.data("height")||aa/(560/315);Z.html('<div class="embed-responsive embed-responsive-16by9"><video width="'+aa+'" height="'+X+'" src="'+Y+'" preload="auto" autoplay controls class="embed-responsive-item"></video></div>');this._resize(aa,X);this._config.onContentLoaded.call(this);if(this._$modalArrows){this._$modalArrows.css("display","none")}this._toggleLoading(false);return this}},{key:"_loadRemoteContent",value:function B(Z,aa){var ac=this;var ab=this._$element.data("width")||560;var X=this._$element.data("height")||560;var Y=this._$element.data("disableExternalCheck")||false;this._toggleLoading(false);if(!Y&&!this._isExternal(Z)){aa.load(Z,k.proxy(function(){return ac._$element.trigger("loaded.bs.modal");l}))}else{aa.html('<iframe src="'+Z+'" frameborder="0" allowfullscreen></iframe>');this._config.onContentLoaded.call(this)}if(this._$modalArrows){this._$modalArrows.css("display","none")}this._resize(ab,X);return this}},{key:"_isExternal",value:function U(Y){var X=Y.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/);if(typeof X[1]==="string"&&X[1].length>0&&X[1].toLowerCase()!==location.protocol){return true}if(typeof X[2]==="string"&&X[2].length>0&&X[2].replace(new RegExp(":("+({"http:":80,"https:":443})[location.protocol]+")?$"),"")!==location.host){return true}return false}},{key:"_error",value:function x(X){console.error(X);this._containerToUse().html(X);this._resize(300,300);return this}},{key:"_preloadImageByIndex",value:function P(aa,Y){if(!this._$galleryItems){return}var X=k(this._$galleryItems.get(aa),false);if(typeof X=="undefined"){return}var Z=X.attr("data-remote")||X.attr("href");if(X.attr("data-type")==="image"||this._isImage(Z)){this._preloadImage(Z,false)}if(Y>0){return this._preloadImageByIndex(aa+1,Y-1)}}},{key:"_preloadImage",value:function A(aa,Z){var Y=this;Z=Z||false;var X=new Image();if(Z){(function(){var ab=setTimeout(function(){Z.append(Y._config.loadingMessage)},200);X.onload=function(){if(ab){clearTimeout(ab)}ab=null;var ac=k("<img />");ac.attr("src",X.src);ac.addClass("img-fluid");ac.css("width","100%");Z.html(ac);if(Y._$modalArrows){Y._$modalArrows.css("display","")}Y._resize(X.width,X.height);Y._toggleLoading(false);return Y._config.onContentLoaded.call(Y)};X.onerror=function(){Y._toggleLoading(false);return Y._error(Y._config.strings.fail+("  "+aa))}})()}X.src=aa;return X}},{key:"_resize",value:function w(X,ah){ah=ah||X;this._wantedWidth=X;this._wantedHeight=ah;var ad=this._padding.left+this._padding.right+this._border.left+this._border.right;var ag=Math.min(X+ad,this._config.doc.body.clientWidth);if(X+ad>ag){ah=(ag-ad)/X*ah;X=ag}else{X=X+ad}var Y=0,ac=0;if(this._footerIsShown){ac=this._$modalFooter.outerHeight(true)||55}if(this._titleIsShown){Y=this._$modalHeader.outerHeight(true)||67}var Z=this._padding.top+this._padding.bottom+this._border.bottom+this._border.top;var ab=parseFloat(this._$modalDialog.css("margin-top"))+parseFloat(this._$modalDialog.css("margin-bottom"));var af=Math.min(ah,k(window).height()-Z-ab-Y-ac);if(ah>af){var aa=Math.min(af/ah,1);X=Math.ceil(aa*X)}this._$lightboxContainer.css("height",af);this._$modalDialog.css("width","auto").css("maxWidth",X);if(!this._isBootstrap3){var ae=this._$modal.data("bs.modal");if(ae){ae._handleUpdate()}}else{var ae=this._$modal.data("bs.modal");if(ae){ae.handleUpdate()}}return this}}],[{key:"_jQueryInterface",value:function C(Y){var X=this;Y=Y||{};return this.each(function(){var aa=k(X);var Z=k.extend({},t.Default,aa.data(),typeof Y==="object"&&Y);new t(X,Z)})}}]);return t})();k.fn[p]=f._jQueryInterface;k.fn[p].Constructor=f;k.fn[p].noConflict=function(){k.fn[p]=e;return f._jQueryInterface};return f})(jQuery)}(jQuery);